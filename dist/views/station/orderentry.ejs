<div class="list-group-item pr-2 pl-1">

    <!-- Order header -->
    <div class="pb-2">
        <!-- Collapse button -->
        <% if  (special) { %>
            <!-- Extras or Note detected -->
            <% if(special) { %>
            <img src="/images/alert.png" style="width: 15px" />
            <% } %>
            <!-- Status -->
            <% if(order.stoniert) { %>
            <img src="/images/canceled.png" style="width: 15px" />
            <% } else if (order.erledigt) { %>
            <img src="/images/check.png" style="width: 15px" />
            <% } else if (order.in_zubereitung){ %>
            <img src="/images/loading.gif" style="width: 15px" />
            <% } else { %>
            <img src="/images/order.png" style="width: 15px" />
            <% } %>

            <!-- Gericht -->
            <span class="align-middle">
                <%= order.product.name %>
            </span>
        </a>

        <% } else { %>

        <span class="pl-5 ml-2">
            <!-- Status -->
            <% switch (order.getCurrentState().statetype) {
                case 0 : %>
            <img src="/images/order.png" style="width:15px">
            <% break;
            case 1 : %>
            <img src="/images/loading.gif" style="width:15px">
            <% break;
            case 2 : %>
            <img src="/images/outbox.png" style="width:15px">
            <% break;
                case 3 : %>
            <img src="/images/check.png" style="width:15px">
            <% break;
                case 4 : %>
            <img src="/images/canceled.png" style="width:15px">
            <% break;
            } %>
            <!-- Gericht -->
            <span class="align-middle">
                <%= order.product.name %>
                <% if(order.variation != null) { %>
                , <%= order.variation.attrname %>
                <% } %>
            </span>
        </span>
        <% } %>


        <!-- Right side of header-->
        <div class="float-end">
            <!-- Order recieved and waittime -->
            <span class="align-middle">
                <img src="/images/sand_clock.png" style="width: 18px">
                <%= recieved %>
                <img src="/images/history.png" style="width: 18px">
                <%= waittime %> m
            </span>

            <!-- Tisch Nummer -->
            <span class="align-middle px-3">
                <%= order.session.table.name%>
            </span>

            <!-- Gericht buttons -->
            <% switch (order.getCurrentState().statetype) {
                case 0 : %>
            <button class="btn btn-info btn-sm" style="width:80px;"
                onclick='updateOrderState("<%= order.id%>", "processingOrder")'>
                <img src="/images/chef.png" style="width: 20px; height: 22px" />
            </button>
            <% break;
            case 1 : %>
            <button class="btn btn-primary btn-sm" style="width:164px;"
                onclick='updateOrderState("<%= order.id%>", "sendingOrder")'>
                <img src="/images/sent.png" style="width: 20px; height: 22px" />
            </button>
            <% break;
            case 2 : %>
            <button class="btn btn-success btn-sm" style="width:80px;"
                onclick='updateOrderState("<%= order.id%>", "deliveredOrder")'>
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="22" fill="currentColor" class="bi bi-check2"
                    viewBox="0 0 16 16">
                    <path
                        d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z" />
                </svg>
            </button>
            <% break;
            } %>
            <!-- Abort buttons -->
            <% switch (order.getCurrentState().statetype) {
                case 0 : %>
            <button class="btn btn-danger btn-sm" style="width:80px;"
                onclick='updateOrderState("<%= order.id%>", "canceledOrder")'>
                <img src="/images/close.png" style="width: 24px; height: 24px" />
            </button>
            <% break;
            case 2 : %>
            <button class="btn btn-danger btn-sm" style="width:80px;"
                onclick='updateOrderState("<%= order.id%>", "canceledOrder")'>
                <img src="/images/sent_failed.png" style="width: 20px; height: 22px" />
            </button>
            <% break;
            } %>

        </div>

    </div>
    <!-- Options -->
    <!-- Extras or Note detected -->
    <% if(special) { %>
    <div class="collapse show pt-1" data-parent="#orders" id="options_order<%= order.id%>">
        <div class="card card-body p-2" id="div_options_order<%= order.id%>" style="min-height: 60px">
            <% if(ingredients.size) { %>
            
                <div class="row row-cols-3 py-0">
                    <% ingredients.forEach((value, key)=>{%>
                        <div class="col">
                        <% if(value) { %>
                        <img src="/images/add.png" style="width: 20px" />
                        <% } else { %>
                        <img src="/images/canceled.png" style="width: 20px" />
                        <% }  %>
                        <span><%=key.name %></span>
                    </div>
                    <% }) %>
                </div>
            
            <% } %>
            <% if(order.note) { %>
            <span class="form-control">Notiz: <%=order.note %></span>
            <% } %>
        </div>
    </div>
    <% } %>
</div>